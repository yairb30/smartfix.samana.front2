<div class="repairs-container">
  <div class="header-section">
    <h2 class="page-title">
      <span class="title-icon">ğŸ› ï¸</span>
      GestiÃ³n de Reparaciones
    </h2>
    
    <div class="header-actions">
      <div class="search-container">
        <input
          type="text"
          [formControl]="searchControl"
          placeholder="Buscar por celular o cliente..."
          class="search-input"
        />
        <span class="search-icon">ğŸ”</span>
      </div>
      
      @if (admin) {
        <button class="btn-primary" (click)="create()">
          <span class="btn-icon">â•</span>
          Nueva ReparaciÃ³n
        </button>
      }
    </div>
  </div>

  <!-- Cards de reparaciones -->
  <div class="cards-container">
    @for (repair of repairs; track $index) {
      <div class="repair-card">
        <div class="card-header">
          <div class="repair-info">
            <h3 class="repair-title">{{ repair.customer.name }} {{ repair.customer.lastname }}</h3>
          </div>
          <div class="status-badge" [class]="'status-' + repair.state.toLowerCase().replace(' ', '-')">
            {{ repair.state }}
          </div>
        </div>
        
        <div class="card-body">
          <div class="device-info">
            <div class="device-icon">ğŸ“±</div>
            <div class="device-details">
              <h4>{{ repair.phone.brand }} {{ repair.phone.model }}</h4>
              <p class="device-label">Dispositivo</p>
            </div>
          </div>
          
          <div class="info-grid">
            <div class="info-item">
              <span class="info-label">
                <span class="info-icon">âš ï¸</span>
                Falla
              </span>
              <span class="info-value">{{ repair.fault }}</span>
            </div>
            
            <div class="info-item">
              <span class="info-label">
                <span class="info-icon">ğŸ“…</span>
                Fecha
              </span>
              <span class="info-value">{{ repair.date | date : "dd/MM/yyyy" }}</span>
            </div>
          </div>
        </div>
        
        @if (admin) {
          <div class="card-actions">
            <button class="btn-edit" (click)="update(repair.id)">
              <span class="btn-icon">âœï¸</span>
              Editar
            </button>
            <button class="btn-delete" (click)="delete(repair)">
              <span class="btn-icon">ğŸ—‘ï¸</span>
              Eliminar
            </button>
          </div>
        }
      </div>
    }
    
    @if (repairs.length === 0) {
      <div class="empty-state">
        <div class="empty-icon">ğŸ”§</div>
        <h3>No hay reparaciones disponibles</h3>
        <p>Comienza registrando tu primera reparaciÃ³n</p>
        @if (admin) {
          <button class="btn-primary" (click)="create()">
            <span class="btn-icon">â•</span>
            Nueva ReparaciÃ³n
          </button>
        }
      </div>
    }
  </div>

  <!-- PaginaciÃ³n -->
  <app-pagination 
    [currentPage]="currentPage"
    [totalPages]="totalPages"
    (pageChange)="goToPage($event)">
  </app-pagination>
</div>
